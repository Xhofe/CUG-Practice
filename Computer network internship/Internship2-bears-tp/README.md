# 姓名
徐鸿飞

# 修改的地方
读写文件都改成了为二进制打开。因为有的地方用文本模式打开会出现问题，未读完就为空了。

# 刚开始的想法：
创建一个字典，当字典的size小于等于5时，从文件中读入数据并创建包加入到字典，字典键为seqno，循环中依次发送字典中的内容，然后接受ack，超时跳出接受的循环，可以过测试，但是这样会很慢，因为每次循环，都要等待timeout，而且会重复发包。

# 坑的地方
Sender开头加了一个sys.argv，没有太注意到，导致怎么测试都不对，😭😭。。。

# 修改
刚开始理解的不对，需要实现的是一个超时重传，应该做的是纪录下发送时的时间，然后循环检测有没有接收到，送达的话从字典中删除这个包，如果没有ack，再检测当前时间与发送时间的差，是否超过了timeout。若超过timeout，重发这个包，然后更新发送时间。
新的版本接受ack在一个新的线程中进行。
在发送循环中，只要还未读到文件尾就不结束，然后就是如果当前seqno小于等于接受到的最大（逻辑有些混乱）ack+windowsize就发送一个包（即大小为windosize的滑动窗口），读到end时纪录当前的seqno：用于结束ack的循环。

# 兼容可变环路时间的实现
初始timeout=0.5
之后在ack时使用函数SRTTN+1 = 0.9*SRTTN + 0.1*RTTN+1更新timeout。

# 实现的功能
(1)可变大小滑动窗口:修改windowsize即可
(2)选择性应答：只会重发超时的包，不会一直重发最后N个包。
(3)兼容可变环路时间